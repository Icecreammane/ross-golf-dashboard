<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üöÄ Mission Control - Unified Intelligence</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: #000000;
            color: #ffffff;
            overflow-x: hidden;
        }
        
        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            padding: 30px;
            text-align: center;
            box-shadow: 0 4px 20px rgba(102, 126, 234, 0.3);
        }
        
        .header h1 {
            font-size: 48px;
            font-weight: 700;
            margin-bottom: 10px;
        }
        
        .header p {
            font-size: 18px;
            opacity: 0.9;
        }
        
        .status-bar {
            background: #111;
            padding: 20px;
            display: flex;
            justify-content: space-around;
            border-bottom: 2px solid #333;
        }
        
        .status-item {
            text-align: center;
        }
        
        .status-label {
            font-size: 12px;
            color: #888;
            text-transform: uppercase;
            letter-spacing: 1px;
            margin-bottom: 8px;
        }
        
        .status-value {
            font-size: 24px;
            font-weight: bold;
            color: #667eea;
        }
        
        .status-indicator {
            display: inline-block;
            width: 10px;
            height: 10px;
            border-radius: 50%;
            margin-right: 6px;
            animation: pulse 2s infinite;
        }
        
        .status-operational {
            background: #10b981;
        }
        
        .status-degraded {
            background: #fbbf24;
        }
        
        .status-error {
            background: #ef4444;
        }
        
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }
        
        .grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 20px;
            padding: 20px;
            max-width: 1800px;
            margin: 0 auto;
        }
        
        .card {
            background: linear-gradient(135deg, #1a1a1a 0%, #0a0a0a 100%);
            border: 1px solid #333;
            border-radius: 16px;
            padding: 24px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.4);
            transition: transform 0.2s, box-shadow 0.2s;
        }
        
        .card:hover {
            transform: translateY(-4px);
            box-shadow: 0 12px 48px rgba(102, 126, 234, 0.2);
        }
        
        .card-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 20px;
        }
        
        .card-title {
            font-size: 20px;
            font-weight: 600;
            color: #667eea;
        }
        
        .card-icon {
            font-size: 32px;
        }
        
        .metric {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 12px 0;
            border-bottom: 1px solid #222;
        }
        
        .metric:last-child {
            border-bottom: none;
        }
        
        .metric-label {
            font-size: 14px;
            color: #888;
        }
        
        .metric-value {
            font-size: 18px;
            font-weight: 600;
            color: #fff;
        }
        
        .insight {
            padding: 16px;
            margin-bottom: 12px;
            border-radius: 12px;
            border-left: 4px solid;
            background: rgba(255, 255, 255, 0.03);
        }
        
        .insight-high {
            border-color: #ef4444;
            background: rgba(239, 68, 68, 0.1);
        }
        
        .insight-medium {
            border-color: #fbbf24;
            background: rgba(251, 191, 36, 0.1);
        }
        
        .insight-low {
            border-color: #10b981;
            background: rgba(16, 185, 129, 0.1);
        }
        
        .insight-type {
            font-size: 11px;
            color: #888;
            text-transform: uppercase;
            letter-spacing: 1px;
            margin-bottom: 4px;
        }
        
        .insight-message {
            font-size: 14px;
            line-height: 1.5;
        }
        
        .btn {
            display: inline-block;
            padding: 12px 24px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            text-decoration: none;
            border-radius: 8px;
            font-weight: 600;
            transition: transform 0.2s;
            border: none;
            cursor: pointer;
            font-size: 14px;
        }
        
        .btn:hover {
            transform: scale(1.05);
        }
        
        .btn-secondary {
            background: #333;
        }
        
        .quick-links {
            display: flex;
            gap: 12px;
            flex-wrap: wrap;
            margin-top: 16px;
        }
        
        .timestamp {
            text-align: center;
            color: #666;
            padding: 40px 20px;
            font-size: 14px;
        }
        
        .large-metric {
            font-size: 48px;
            font-weight: 700;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin: 20px 0;
        }
        
        .progress-bar {
            width: 100%;
            height: 8px;
            background: #222;
            border-radius: 4px;
            overflow: hidden;
            margin: 12px 0;
        }
        
        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #667eea 0%, #764ba2 100%);
            transition: width 0.3s;
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>üöÄ MISSION CONTROL</h1>
        <p>Unified Intelligence Dashboard - All Systems</p>
    </div>
    
    <div class="status-bar" id="statusBar">
        <div class="status-item">
            <div class="status-label">System Status</div>
            <div class="status-value">
                <span class="status-indicator status-operational"></span>
                <span id="overallStatus">LOADING...</span>
            </div>
        </div>
        <div class="status-item">
            <div class="status-label">Active Systems</div>
            <div class="status-value" id="activeSystems">-</div>
        </div>
        <div class="status-item">
            <div class="status-label">Last Sync</div>
            <div class="status-value" id="lastSync">-</div>
        </div>
        <div class="status-item">
            <div class="status-label">Insights</div>
            <div class="status-value" id="insightCount">-</div>
        </div>
    </div>
    
    <div class="grid">
        <!-- System Health Card -->
        <div class="card">
            <div class="card-header">
                <span class="card-title">üè• System Health</span>
                <span class="card-icon">‚úÖ</span>
            </div>
            <div id="systemHealth"></div>
        </div>
        
        <!-- God Mode Card -->
        <div class="card">
            <div class="card-header">
                <span class="card-title">üß† God Mode</span>
                <span class="card-icon">üéØ</span>
            </div>
            <div id="godModeData"></div>
            <div class="quick-links">
                <a href="god_mode/dashboard.html" class="btn btn-secondary">View Full Dashboard</a>
            </div>
        </div>
        
        <!-- Revenue Machine Card -->
        <div class="card">
            <div class="card-header">
                <span class="card-title">üí∞ Revenue Machine</span>
                <span class="card-icon">üìà</span>
            </div>
            <div id="revenueData"></div>
            <div class="quick-links">
                <a href="revenue-dashboard.html" class="btn btn-secondary">View Full Dashboard</a>
            </div>
        </div>
        
        <!-- Operator Loop Card -->
        <div class="card">
            <div class="card-header">
                <span class="card-title">ü§ñ Operator Loop</span>
                <span class="card-icon">üîÑ</span>
            </div>
            <div id="operatorData"></div>
        </div>
        
        <!-- Multiverse Card -->
        <div class="card">
            <div class="card-header">
                <span class="card-title">üåå Multiverse</span>
                <span class="card-icon">üöÄ</span>
            </div>
            <div id="multiverseData"></div>
            <div class="quick-links">
                <a href="multiverse/dashboard.html" class="btn btn-secondary">View Timelines</a>
                <a href="multiverse/life_simulator.html" class="btn btn-secondary">Life Simulator</a>
            </div>
        </div>
        
        <!-- Unified Insights Card (spans 2 columns) -->
        <div class="card" style="grid-column: span 2;">
            <div class="card-header">
                <span class="card-title">üí° Unified Insights</span>
                <span class="card-icon">üéØ</span>
            </div>
            <div id="insightsContainer"></div>
        </div>
    </div>
    
    <div class="timestamp" id="timestamp"></div>
    
    <script>
        async function loadUnifiedData() {
            try {
                const response = await fetch('memory/unified-state.json');
                const data = await response.json();
                
                updateStatusBar(data);
                updateSystemHealth(data.systems);
                updateInsights(data.insights);
                updateTimestamp(data.last_sync);
                
                // Load specific system data
                await loadGodModeData();
                await loadRevenueData();
                await loadOperatorData();
                await loadMultiverseData();
                
            } catch (error) {
                console.error('Failed to load unified data:', error);
                document.getElementById('overallStatus').textContent = 'ERROR';
            }
        }
        
        function updateStatusBar(data) {
            const systems = data.systems || {};
            const activeCount = Object.values(systems).filter(s => s.status === 'operational').length;
            const totalCount = Object.keys(systems).length;
            
            document.getElementById('overallStatus').textContent = activeCount === totalCount ? 'OPERATIONAL' : 'DEGRADED';
            document.getElementById('activeSystems').textContent = `${activeCount}/${totalCount}`;
            document.getElementById('insightCount').textContent = (data.insights || []).length;
            
            if (data.last_sync) {
                const syncTime = new Date(data.last_sync);
                const now = new Date();
                const diffMin = Math.floor((now - syncTime) / 60000);
                document.getElementById('lastSync').textContent = diffMin === 0 ? 'Just now' : `${diffMin}m ago`;
            }
        }
        
        function updateSystemHealth(systems) {
            const container = document.getElementById('systemHealth');
            container.innerHTML = '';
            
            for (const [name, data] of Object.entries(systems)) {
                const emoji = data.status === 'operational' ? '‚úÖ' : 
                             data.status === 'error' ? '‚ùå' : '‚ö†Ô∏è';
                
                const metric = document.createElement('div');
                metric.className = 'metric';
                metric.innerHTML = `
                    <span class="metric-label">${emoji} ${name.replace(/_/g, ' ').toUpperCase()}</span>
                    <span class="metric-value">${data.status}</span>
                `;
                container.appendChild(metric);
            }
        }
        
        async function loadGodModeData() {
            try {
                const response = await fetch('god_mode/behavioral_data.json');
                const data = await response.json();
                
                const container = document.getElementById('godModeData');
                
                const tomorrowEnergy = data.tomorrow_prediction?.energy || 0;
                const peakHours = data.peak_productivity_window || 'Unknown';
                const avgWins = data.average_daily_wins || 0;
                
                container.innerHTML = `
                    <div class="large-metric">${tomorrowEnergy}/100</div>
                    <div class="metric-label">Tomorrow's Energy</div>
                    <div class="metric">
                        <span class="metric-label">Peak Hours</span>
                        <span class="metric-value">${peakHours}</span>
                    </div>
                    <div class="metric">
                        <span class="metric-label">Avg Daily Wins</span>
                        <span class="metric-value">${avgWins.toFixed(1)}</span>
                    </div>
                `;
            } catch (error) {
                console.error('Failed to load God Mode data:', error);
            }
        }
        
        async function loadRevenueData() {
            try {
                const response = await fetch('revenue/opportunities.json');
                const data = await response.json();
                
                const opportunities = data.opportunities || [];
                const totalPotential = opportunities.reduce((sum, opp) => {
                    return sum + ((opp.monthly_low + opp.monthly_high) / 2);
                }, 0);
                
                const container = document.getElementById('revenueData');
                container.innerHTML = `
                    <div class="large-metric">$${totalPotential.toFixed(0)}</div>
                    <div class="metric-label">Monthly Potential (MRR)</div>
                    <div class="progress-bar">
                        <div class="progress-fill" style="width: ${Math.min(totalPotential / 5000 * 100, 100)}%"></div>
                    </div>
                    <div class="metric">
                        <span class="metric-label">Opportunities</span>
                        <span class="metric-value">${opportunities.length}</span>
                    </div>
                    <div class="metric">
                        <span class="metric-label">Goal Progress</span>
                        <span class="metric-value">${Math.min((totalPotential / 500) * 100, 100).toFixed(0)}%</span>
                    </div>
                `;
            } catch (error) {
                console.error('Failed to load revenue data:', error);
            }
        }
        
        async function loadOperatorData() {
            try {
                const queueResp = await fetch('opportunities/queue.json');
                const queue = await queueResp.json();
                
                const draftedResp = await fetch('opportunities/drafted.json');
                const drafted = await draftedResp.json();
                
                const container = document.getElementById('operatorData');
                container.innerHTML = `
                    <div class="metric">
                        <span class="metric-label">Pending Opportunities</span>
                        <span class="metric-value">${queue.length}</span>
                    </div>
                    <div class="metric">
                        <span class="metric-label">Drafted Responses</span>
                        <span class="metric-value">${drafted.length}</span>
                    </div>
                    <div class="metric">
                        <span class="metric-label">Ready to Send</span>
                        <span class="metric-value">${drafted.filter(d => d.status === 'approved').length}</span>
                    </div>
                `;
            } catch (error) {
                console.error('Failed to load operator data:', error);
            }
        }
        
        async function loadMultiverseData() {
            try {
                const response = await fetch('multiverse/timelines.json');
                const data = await response.json();
                
                const timelines = data.timelines || {};
                const beastMode = timelines.beast_mode;
                
                let beastMRR = 0;
                if (beastMode && beastMode.predictions) {
                    const oneYear = beastMode.predictions.find(p => p.timepoint === '1_year');
                    beastMRR = oneYear?.side_income || 0;
                }
                
                const container = document.getElementById('multiverseData');
                container.innerHTML = `
                    <div class="large-metric">$${beastMRR}</div>
                    <div class="metric-label">BEAST MODE (1 Year)</div>
                    <div class="metric">
                        <span class="metric-label">Timelines Simulated</span>
                        <span class="metric-value">${Object.keys(timelines).length}</span>
                    </div>
                    <div class="metric">
                        <span class="metric-label">Best Path</span>
                        <span class="metric-value">${beastMode?.name || 'Unknown'}</span>
                    </div>
                `;
            } catch (error) {
                console.error('Failed to load multiverse data:', error);
            }
        }
        
        function updateInsights(insights) {
            const container = document.getElementById('insightsContainer');
            container.innerHTML = '';
            
            if (!insights || insights.length === 0) {
                container.innerHTML = '<p style="color: #666; text-align: center; padding: 40px;">No insights available yet. Run a sync to generate insights.</p>';
                return;
            }
            
            // Group by priority
            const high = insights.filter(i => i.priority === 'high');
            const medium = insights.filter(i => i.priority === 'medium');
            const low = insights.filter(i => i.priority === 'low');
            
            [high, medium, low].forEach(group => {
                group.forEach(insight => {
                    const div = document.createElement('div');
                    div.className = `insight insight-${insight.priority}`;
                    div.innerHTML = `
                        <div class="insight-type">${insight.type.replace(/_/g, ' ')}</div>
                        <div class="insight-message">${insight.message}</div>
                    `;
                    container.appendChild(div);
                });
            });
        }
        
        function updateTimestamp(timestamp) {
            const elem = document.getElementById('timestamp');
            if (timestamp) {
                elem.textContent = `Last updated: ${new Date(timestamp).toLocaleString()}`;
            }
        }
        
        // Load data on page load
        loadUnifiedData();
        
        // Refresh every 60 seconds
        setInterval(loadUnifiedData, 60000);
    </script>
</body>
</html>
